<!DOCTYPE html>
<html>
<head>
    <title>Minimal SocketIO Test</title>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
</head>
<body style="background: #000; color: #0f0; font-family: monospace; padding: 20px;">
    <h1>üî¨ MINIMAL SOCKETIO TEST</h1>
    <div id="status">CONNECTING...</div>
    <div id="output"></div>
    <button onclick="sendTest()">SEND TEST</button>
    
    <script>
        const socket = io();
        const output = document.getElementById('output');
        const status = document.getElementById('status');
        
        function log(msg) {
            output.innerHTML += '<br>' + new Date().toLocaleTimeString() + ': ' + msg;
            console.log(msg);
        }
        
        socket.on('connect', function() {
            status.innerHTML = '‚úÖ CONNECTED';
            status.style.color = '#0f0';
            log('‚úÖ SocketIO CONNECTED');
        });
        
        socket.on('disconnect', function() {
            status.innerHTML = '‚ùå DISCONNECTED';  
            status.style.color = '#f00';
            log('‚ùå SocketIO DISCONNECTED');
        });
        
        // Listen for test events
        socket.on('test_response', function(data) {
            log('üì® RECEIVED TEST_RESPONSE: ' + JSON.stringify(data));
        });
        
        socket.on('simple_ping', function(data) {
            log('üì° RECEIVED SIMPLE_PING: ' + JSON.stringify(data));
        });
        
        function sendTest() {
            socket.emit('test_request', {message: 'Hello from client'});
            log('üì§ SENT test_request');
        }
        
        // Listen for ANY event (debugging)
        const originalOn = socket.on;
        socket.on = function(event, callback) {
            return originalOn.call(this, event, function(data) {
                log('üéØ ANY EVENT: ' + event);
                return callback(data);
            });
        };
        
        log('üöÄ JavaScript loaded');
    </script>
</body>
</html>